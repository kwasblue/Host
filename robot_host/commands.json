{
  "commands": {
    "CMD_CLEAR_ESTOP": {
      "description": "Clear ESTOP and typically return to IDLE mode.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {}
    },
    "CMD_ESTOP": {
      "description": "Emergency stop, immediately disable motion.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {}
    },
    "CMD_GPIO_WRITE": {
      "description": "Write a digital value to a logical GPIO channel.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "channel": {
          "required": true,
          "type": "int"
        },
        "value": {
          "required": true,
          "type": "int"
        }
      }
    },
    "CMD_LED_OFF": {
      "description": "Turn status LED off.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {}
    },
    "CMD_LED_ON": {
      "description": "Turn status LED on.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {}
    },
    "CMD_PWM_SET": {
      "description": "Set PWM duty cycle for a logical channel.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "channel": {
          "required": true,
          "type": "int"
        },
        "duty": {
          "required": true,
          "type": "float"
        },
        "freq_hz": {
          "required": false,
          "type": "float"
        }
      }
    },
    "CMD_SERVO_ATTACH": {
      "description": "Attach a servo ID to a physical pin.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "channel": {
          "required": true,
          "type": "int"
        },
        "max_us": {
          "default": 2000,
          "required": false,
          "type": "int"
        },
        "min_us": {
          "default": 1000,
          "required": false,
          "type": "int"
        },
        "servo_id": {
          "required": true,
          "type": "int"
        }
      }
    },
    "CMD_SERVO_DETACH": {
      "description": "Detach a servo ID.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "servo_id": {
          "required": true,
          "type": "int"
        }
      }
    },
    "CMD_SERVO_SET_ANGLE": {
      "description": "Set servo angle in degrees.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "angle_deg": {
          "required": true,
          "type": "float"
        },
        "servo_id": {
          "required": true,
          "type": "int"
        }
      }
    },
    "CMD_SET_MODE": {
      "description": "Set the high-level robot mode (e.g., IDLE, ARMED, ACTIVE).",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "mode": {
          "enum": [
            "IDLE",
            "ARMED",
            "ACTIVE",
            "CALIB"
          ],
          "required": true,
          "type": "string"
        }
      }
    },
    "CMD_SET_VEL": {
      "description": "Set linear and angular velocity in robot frame.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "frame": {
          "default": "robot",
          "enum": [
            "robot",
            "world"
          ],
          "required": false,
          "type": "string"
        },
        "omega": {
          "required": true,
          "type": "float",
          "units": "rad/s"
        },
        "vx": {
          "required": true,
          "type": "float",
          "units": "m/s"
        }
      }
    },
    "CMD_STEPPER_MOVE_REL": {
      "description": "Move a stepper a relative number of steps.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "motor_id": {
          "required": true,
          "type": "int"
        },
        "speed_steps_s": {
          "default": 1000.0,
          "required": false,
          "type": "float"
        },
        "steps": {
          "required": true,
          "type": "int"
        }
      }
    },
    "CMD_STEPPER_STOP": {
      "description": "Immediately stop a stepper motor.",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {
        "motor_id": {
          "required": true,
          "type": "int"
        }
      }
    },
    "CMD_STOP": {
      "description": "Stop all motion (soft stop).",
      "direction": "host->mcu",
      "kind": "cmd",
      "payload": {}
    }
  },
  "schema_version": 1
}